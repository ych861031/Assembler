COPY    START   0        COPY FILE FROM INPUT TO OUTPUT
FIRST   STL     RETADR   SAVE RETURN ADDRESS
        LDB    #LENGTH   ESTABLISH BASE REGISTER
        BASE    LENGTH  
CLOOP  +JSUB    RDREC    READ INPUT RECORD
        LDA     LENGTH   TEST FOR EOF (LENGTH = 0)
        COMP   #0
        JEQ     ENDFIL   EXIT IF EOF FOUND
       +JSUB    WRREC    WRITE OUTPUT RECORD
        J       CLOOP    LOOP
ENDFIL  LDA     EOF      INSERT END OF FILE MARKER
        STA     BUFFER
        LDA    #3        SET LENGTH =3
        STA     LENGTH
       +JSUB    WRREC    WRITE EOF
        J      @RETADR   RETURN TO THE CALLER
        LTORG
RETADR  RESW    1
LENGTH  RESW    1        LENGTH OF RECORD
X       RESB    4096     4096-BYTE BUFFER AREA
Y       EQU     *
MAXLEN  EQU     Y-X      MAXIMUM RECORD LENGTH
        END     FIRST